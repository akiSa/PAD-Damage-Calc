<!DOCTYPE html>
<html>
  <head>
    <title>lolwut</title>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.15/angular.min.js"></script>
  </head>
  <body>
    <div ng-app="" ng-controller="mycontroller">
      <form ng-submit="submit()">
        <input type="text" ng-model="teamID" />
        <img ng-src="{{image[0]}}" />
        <img ng-src="{{image[1]}}" />
        <img ng-src="{{image[2]}}" />
        <img ng-src="{{image[3]}}" />
        <img ng-src="{{image[4]}}" />
        <img ng-src="{{image[5]}}" />
      </form>
    </div>
    <script>
    function mycontroller($scope) {
      $scope.teamID = "77475";
      $scope.image = [ "", "", "", "", "", "" ];
      
      $scope.submit = function() {
        sock = new WebSocket("ws://54.88.52.106:8080/team/" + $scope.teamID + "/");
        //console.log ($scope.teamID)
        sock.onopen = function () { }
        sock.onmessage = function (message) {
          //console.log(message.data)
          var m = JSON.parse(message.data);
          m.team.forEach(function(entry) {
              console.log(entry);
            });
          
          $scope.$apply(function() {
              for (var i = 0; i < $scope.image.length; i++) {
                $scope.image[i] = "http://padherder.com/"+m.team[i].image60_href
              }
            });

        }
      }
    }
    </script>
  </body>
</html>
